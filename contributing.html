

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>贡献指南 &mdash; pyutils 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8d563738"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="变更日志" href="changelog.html" />
    <link rel="prev" title="pyutils package" href="pyutils.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="index.html" class="icon icon-home">
            pyutils
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">内容目录:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">安装指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">快速开始</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">pyutils</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">贡献指南</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">开发环境设置</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">开发工作流</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">代码质量检查</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#makefile">使用 Makefile</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id6">提交代码</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">分支策略</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">提交流程</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">提交信息规范</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id10">代码规范</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id11">代码风格</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">类型注解</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">文档规范</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id14">测试规范</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id15">测试结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16">覆盖率要求</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">性能测试</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id18">文档贡献</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id19">文档类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id20">构建文档</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id21">发布流程</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id22">版本管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id23">自动发布</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id24">手动发布</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id25">问题报告</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bug">报告 Bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id26">功能请求</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id27">获取帮助</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">变更日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme.html">pyutils</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyutils</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">贡献指南</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/contributing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>贡献指南<a class="headerlink" href="#id1" title="Link to this heading"></a></h1>
<p>感谢您对 pyutils 项目的关注！我们欢迎各种形式的贡献，包括但不限于：</p>
<ul class="simple">
<li><p>报告 bug</p></li>
<li><p>提出新功能建议</p></li>
<li><p>改进文档</p></li>
<li><p>提交代码修复</p></li>
<li><p>添加新功能</p></li>
<li><p>优化性能</p></li>
</ul>
<section id="id2">
<h2>开发环境设置<a class="headerlink" href="#id2" title="Link to this heading"></a></h2>
<p>推荐使用 uv 进行开发环境管理：</p>
<ol class="arabic">
<li><p><strong>克隆仓库</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">your</span><span class="o">-</span><span class="n">username</span><span class="o">/</span><span class="n">pyutils</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">pyutils</span>
</pre></div>
</div>
</li>
<li><p><strong>安装 uv</strong> （如果尚未安装）:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Windows</span>
<span class="n">powershell</span> <span class="o">-</span><span class="n">ExecutionPolicy</span> <span class="n">ByPass</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;irm https://astral.sh/uv/install.ps1 | iex&quot;</span>

<span class="c1"># macOS/Linux</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">LsSf</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">astral</span><span class="o">.</span><span class="n">sh</span><span class="o">/</span><span class="n">uv</span><span class="o">/</span><span class="n">install</span><span class="o">.</span><span class="n">sh</span> <span class="o">|</span> <span class="n">sh</span>
</pre></div>
</div>
</li>
<li><p><strong>设置开发环境</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uv</span> <span class="n">sync</span> <span class="o">--</span><span class="nb">all</span><span class="o">-</span><span class="n">extras</span> <span class="o">--</span><span class="n">dev</span>
</pre></div>
</div>
</li>
<li><p><strong>安装 pre-commit 钩子</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uv</span> <span class="n">run</span> <span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">install</span>
<span class="n">uv</span> <span class="n">run</span> <span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">install</span> <span class="o">--</span><span class="n">hook</span><span class="o">-</span><span class="nb">type</span> <span class="n">commit</span><span class="o">-</span><span class="n">msg</span>
</pre></div>
</div>
</li>
<li><p><strong>验证环境</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uv</span> <span class="n">run</span> <span class="n">pytest</span> <span class="n">tests</span><span class="o">/</span>
<span class="n">uv</span> <span class="n">run</span> <span class="n">ruff</span> <span class="n">check</span> <span class="n">src</span><span class="o">/</span>
<span class="n">uv</span> <span class="n">run</span> <span class="n">mypy</span> <span class="n">src</span><span class="o">/</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="id3">
<h2>开发工作流<a class="headerlink" href="#id3" title="Link to this heading"></a></h2>
<p>我们使用现代化的开发工具链来确保代码质量：</p>
<section id="id4">
<h3>代码质量检查<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 代码格式化</span>
uv<span class="w"> </span>run<span class="w"> </span>ruff<span class="w"> </span>format<span class="w"> </span>src/<span class="w"> </span>tests/

<span class="c1"># 代码检查和自动修复</span>
uv<span class="w"> </span>run<span class="w"> </span>ruff<span class="w"> </span>check<span class="w"> </span>--fix<span class="w"> </span>src/<span class="w"> </span>tests/

<span class="c1"># 类型检查</span>
uv<span class="w"> </span>run<span class="w"> </span>mypy<span class="w"> </span>src/

<span class="c1"># 安全检查</span>
uv<span class="w"> </span>run<span class="w"> </span>bandit<span class="w"> </span>-r<span class="w"> </span>src/
</pre></div>
</div>
</section>
<section id="id5">
<h3>测试<a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 运行所有测试</span>
uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>tests/

<span class="c1"># 运行测试并生成覆盖率报告</span>
uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>--cov<span class="o">=</span>src<span class="w"> </span>--cov-report<span class="o">=</span>html<span class="w"> </span>--cov-report<span class="o">=</span>term

<span class="c1"># 运行特定测试</span>
uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>tests/test_string.py

<span class="c1"># 运行性能基准测试</span>
uv<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>benchmark.py
</pre></div>
</div>
</section>
<section id="makefile">
<h3>使用 Makefile<a class="headerlink" href="#makefile" title="Link to this heading"></a></h3>
<p>项目提供了 Makefile 来简化常用命令：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 查看所有可用命令</span>
make<span class="w"> </span><span class="nb">help</span>

<span class="c1"># 快速检查（格式化 + 检查 + 类型检查）</span>
make<span class="w"> </span>quick-check

<span class="c1"># 运行所有 CI 检查</span>
make<span class="w"> </span>ci

<span class="c1"># 设置开发环境</span>
make<span class="w"> </span>dev-setup
</pre></div>
</div>
</section>
</section>
<section id="id6">
<h2>提交代码<a class="headerlink" href="#id6" title="Link to this heading"></a></h2>
<section id="id7">
<h3>分支策略<a class="headerlink" href="#id7" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">main</span></code> - 主分支，包含稳定的发布版本</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">develop</span></code> - 开发分支，包含最新的开发代码</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feature/*</span></code> - 功能分支</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bugfix/*</span></code> - 修复分支</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hotfix/*</span></code> - 紧急修复分支</p></li>
</ul>
</section>
<section id="id8">
<h3>提交流程<a class="headerlink" href="#id8" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p><strong>创建功能分支</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">feature</span><span class="o">/</span><span class="n">your</span><span class="o">-</span><span class="n">feature</span><span class="o">-</span><span class="n">name</span>
</pre></div>
</div>
</li>
<li><p><strong>进行开发</strong>，确保遵循代码规范</p></li>
<li><p><strong>运行测试和检查</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">quick</span><span class="o">-</span><span class="n">check</span>
<span class="n">uv</span> <span class="n">run</span> <span class="n">pytest</span> <span class="n">tests</span><span class="o">/</span>
</pre></div>
</div>
</li>
<li><p><strong>提交代码</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;feat: add your feature description&quot;</span>
</pre></div>
</div>
</li>
<li><p><strong>推送分支</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">feature</span><span class="o">/</span><span class="n">your</span><span class="o">-</span><span class="n">feature</span><span class="o">-</span><span class="n">name</span>
</pre></div>
</div>
</li>
<li><p><strong>创建 Pull Request</strong></p></li>
</ol>
</section>
<section id="id9">
<h3>提交信息规范<a class="headerlink" href="#id9" title="Link to this heading"></a></h3>
<p>我们使用 <a class="reference external" href="https://www.conventionalcommits.org/">Conventional Commits</a> 规范：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">[</span><span class="n">optional</span> <span class="n">scope</span><span class="p">]:</span> <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span>

<span class="p">[</span><span class="n">optional</span> <span class="n">body</span><span class="p">]</span>

<span class="p">[</span><span class="n">optional</span> <span class="n">footer</span><span class="p">(</span><span class="n">s</span><span class="p">)]</span>
</pre></div>
</div>
<p>类型说明：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">feat</span></code>: 新功能</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fix</span></code>: 修复 bug</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">docs</span></code>: 文档更新</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">style</span></code>: 代码格式化（不影响功能）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refactor</span></code>: 重构代码</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">perf</span></code>: 性能优化</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test</span></code>: 添加或修改测试</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chore</span></code>: 构建过程或辅助工具的变动</p></li>
</ul>
<p>示例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">feat</span><span class="p">(</span><span class="n">string</span><span class="p">):</span> <span class="n">add</span> <span class="n">fuzzy</span> <span class="n">matching</span> <span class="n">function</span>

<span class="n">fix</span><span class="p">(</span><span class="n">array</span><span class="p">):</span> <span class="n">handle</span> <span class="n">empty</span> <span class="n">array</span> <span class="ow">in</span> <span class="n">chunk</span> <span class="n">function</span>

<span class="n">docs</span><span class="p">:</span> <span class="n">update</span> <span class="n">installation</span> <span class="n">guide</span> <span class="k">for</span> <span class="n">uv</span>

<span class="n">test</span><span class="p">(</span><span class="n">math</span><span class="p">):</span> <span class="n">add</span> <span class="n">tests</span> <span class="k">for</span> <span class="n">clamp</span> <span class="n">function</span> <span class="n">edge</span> <span class="n">cases</span>
</pre></div>
</div>
</section>
</section>
<section id="id10">
<h2>代码规范<a class="headerlink" href="#id10" title="Link to this heading"></a></h2>
<section id="id11">
<h3>代码风格<a class="headerlink" href="#id11" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>使用 Ruff 进行代码格式化和检查</p></li>
<li><p>行长度限制为 88 字符</p></li>
<li><p>使用 Google 风格的 docstring</p></li>
<li><p>遵循 PEP 8 规范</p></li>
</ul>
</section>
<section id="id12">
<h3>类型注解<a class="headerlink" href="#id12" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>所有公共函数必须有完整的类型注解</p></li>
<li><p>使用 <code class="docutils literal notranslate"><span class="pre">typing</span></code> 模块的类型提示</p></li>
<li><p>复杂类型使用 <code class="docutils literal notranslate"><span class="pre">TypeVar</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Generic</span></code></p></li>
</ul>
<p>示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Union</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">chunk</span><span class="p">(</span><span class="n">array</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">T</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;将数组分割成指定大小的块。</span>

<span class="sd">    Args:</span>
<span class="sd">        array: 要分割的数组</span>
<span class="sd">        size: 每块的大小</span>

<span class="sd">    Returns:</span>
<span class="sd">        分割后的数组列表</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: 当 size 小于等于 0 时</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; chunk([1, 2, 3, 4, 5], 2)</span>
<span class="sd">        [[1, 2], [3, 4], [5]]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Size must be positive&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="n">size</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">),</span> <span class="n">size</span><span class="p">)]</span>
</pre></div>
</div>
</section>
<section id="id13">
<h3>文档规范<a class="headerlink" href="#id13" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>使用 Google 风格的 docstring</p></li>
<li><p>包含参数说明、返回值说明和示例</p></li>
<li><p>重要函数需要包含异常说明</p></li>
<li><p>复杂算法需要说明时间复杂度</p></li>
</ul>
</section>
</section>
<section id="id14">
<h2>测试规范<a class="headerlink" href="#id14" title="Link to this heading"></a></h2>
<section id="id15">
<h3>测试结构<a class="headerlink" href="#id15" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>每个模块对应一个测试文件：<code class="docutils literal notranslate"><span class="pre">test_&lt;module_name&gt;.py</span></code></p></li>
<li><p>使用 pytest 框架</p></li>
<li><p>测试函数命名：<code class="docutils literal notranslate"><span class="pre">test_&lt;function_name&gt;_&lt;scenario&gt;</span></code></p></li>
<li><p>使用参数化测试处理多种输入情况</p></li>
</ul>
<p>示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyutils.array</span><span class="w"> </span><span class="kn">import</span> <span class="n">chunk</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TestChunk</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;测试 chunk 函数。&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_chunk_normal_case</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;测试正常情况。&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">chunk</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">]]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_chunk_empty_array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;测试空数组。&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">chunk</span><span class="p">([],</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="p">[]</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;array,size,expected&quot;</span><span class="p">,</span> <span class="p">[</span>
        <span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]),</span>
        <span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]),</span>
        <span class="p">([</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="p">[[</span><span class="mi">1</span><span class="p">]]),</span>
    <span class="p">])</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_chunk_parametrized</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;参数化测试。&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">chunk</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_chunk_invalid_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;测试无效的 size 参数。&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;Size must be positive&quot;</span><span class="p">):</span>
            <span class="n">chunk</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id16">
<h3>覆盖率要求<a class="headerlink" href="#id16" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>新代码的测试覆盖率应达到 90% 以上</p></li>
<li><p>关键功能必须有完整的测试覆盖</p></li>
<li><p>边界条件和异常情况必须测试</p></li>
</ul>
</section>
<section id="id17">
<h3>性能测试<a class="headerlink" href="#id17" title="Link to this heading"></a></h3>
<p>对于性能敏感的功能，需要添加基准测试：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_chunk_performance</span><span class="p">(</span><span class="n">benchmark</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;测试 chunk 函数性能。&quot;&quot;&quot;</span>
    <span class="n">large_array</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">))</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">benchmark</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">large_array</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">100</span>
</pre></div>
</div>
</section>
</section>
<section id="id18">
<h2>文档贡献<a class="headerlink" href="#id18" title="Link to this heading"></a></h2>
<section id="id19">
<h3>文档类型<a class="headerlink" href="#id19" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>API 文档：自动从 docstring 生成</p></li>
<li><p>用户指南：手写的教程和示例</p></li>
<li><p>开发文档：贡献指南、架构说明等</p></li>
</ul>
</section>
<section id="id20">
<h3>构建文档<a class="headerlink" href="#id20" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 构建 HTML 文档</span>
make<span class="w"> </span>docs

<span class="c1"># 或者直接使用 Sphinx</span>
<span class="nb">cd</span><span class="w"> </span>docs
uv<span class="w"> </span>run<span class="w"> </span>sphinx-build<span class="w"> </span>-b<span class="w"> </span>html<span class="w"> </span>.<span class="w"> </span>_build/html
</pre></div>
</div>
</section>
</section>
<section id="id21">
<h2>发布流程<a class="headerlink" href="#id21" title="Link to this heading"></a></h2>
<section id="id22">
<h3>版本管理<a class="headerlink" href="#id22" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>使用语义化版本号：<code class="docutils literal notranslate"><span class="pre">MAJOR.MINOR.PATCH</span></code></p></li>
<li><p>在 <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> 中更新版本号</p></li>
<li><p>创建 git tag：<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">tag</span> <span class="pre">v1.2.3</span></code></p></li>
</ul>
</section>
<section id="id23">
<h3>自动发布<a class="headerlink" href="#id23" title="Link to this heading"></a></h3>
<p>项目配置了 GitHub Actions 自动发布：</p>
<ol class="arabic simple">
<li><p>推送 tag 到 GitHub</p></li>
<li><p>GitHub Actions 自动构建和测试</p></li>
<li><p>自动发布到 PyPI</p></li>
</ol>
</section>
<section id="id24">
<h3>手动发布<a class="headerlink" href="#id24" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 构建发布包</span>
make<span class="w"> </span>build

<span class="c1"># 发布到 PyPI</span>
make<span class="w"> </span>release
</pre></div>
</div>
</section>
</section>
<section id="id25">
<h2>问题报告<a class="headerlink" href="#id25" title="Link to this heading"></a></h2>
<section id="bug">
<h3>报告 Bug<a class="headerlink" href="#bug" title="Link to this heading"></a></h3>
<p>请在 GitHub Issues 中报告 bug，包含以下信息：</p>
<ul class="simple">
<li><p>Python 版本</p></li>
<li><p>pyutils 版本</p></li>
<li><p>操作系统</p></li>
<li><p>重现步骤</p></li>
<li><p>期望行为</p></li>
<li><p>实际行为</p></li>
<li><p>错误信息（如有）</p></li>
</ul>
</section>
<section id="id26">
<h3>功能请求<a class="headerlink" href="#id26" title="Link to this heading"></a></h3>
<p>提出新功能建议时，请说明：</p>
<ul class="simple">
<li><p>功能描述</p></li>
<li><p>使用场景</p></li>
<li><p>预期 API 设计</p></li>
<li><p>是否愿意实现</p></li>
</ul>
</section>
</section>
<section id="id27">
<h2>获取帮助<a class="headerlink" href="#id27" title="Link to this heading"></a></h2>
<p>如果您在贡献过程中遇到问题，可以：</p>
<ul class="simple">
<li><p>查看现有的 Issues 和 Pull Requests</p></li>
<li><p>在 GitHub Discussions 中提问</p></li>
<li><p>发送邮件给维护者</p></li>
</ul>
<p>感谢您的贡献！🎉</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pyutils.html" class="btn btn-neutral float-left" title="pyutils package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="changelog.html" class="btn btn-neutral float-right" title="变更日志" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, pyutils contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>